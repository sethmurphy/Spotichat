<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>SpotiChat</title>
    <link rel=stylesheet href="/css/style.css" />
    <link rel="stylesheet" href="sp://import/css/eve.css">
    <script src="/js/jquery.1.7.1.min.js"></script>
    <script src="/js/jquery.cookie.js"></script>
    <script src="/js/chatify.js"></script>
    <script src="/js/mustache.js"></script>
    <!-- chat item template -->
    <script id="message-template" type="text/plain">
      <li class="{{msgtype}}">
        <span class="message-username">{{nickname}}</span>
        <span class="message-body">{{{message}}}</span>
        <span class="message-timestamp">{{formattedTime}}</span>
      </li>
    </script>
    <!-- chat channel template -->
    <script id="channel-template" type="text/plain">
    <div id="{{channelID}}">
        <div class="{{loginContainer}}">
            <p class="intro">
            SpotiChat keeps the converstation going while you listen. 
            Choose your own music to listen to and chat with others that are listening to the same thing. 
            No one listening to the same thing? See what they said about the song while they were there.<br /><br />
            SpotiChat will retain your chats identified by your Spotify username and they will be available to view by anyone on the Spotify platform.
            </p>
            <div class="agree">
            <label class="whoareyou" for="nickname">Are you down with that?</label>
            <button class="new-button {{loginButton}}" type="submit" name="agree" >I Agree, let me join the conversation!</button>
            </div>
            <span class="errors {{loginErrors}}" style="display: none;"></span>
            <div style="clear: both;"></div>
        </div>
        <div class="{{chatContainer}}" style="display: none;">
            <ul class="{{messageContainer}}">
            </ul>
            <div class="footer">
                <div class="{{inputContainer}}">
                    <div class="send-form">
                        <label class="{{usernameDisplay}}" for="{{composeMessageField}}-{{chatChannel}}">anonymous:</label>
                        <input type="text" id="{{composeMessageField}}-{{chatChannel}}" class="{{composeMessageField}}"/>
                        <input class="{{sendMessageButton}}" type="submit" name="send" value="send"
                                disabled="disabled" />
                        <span class="errors {{chatErrors}}" style="display: none;"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </script>
</head>
<body onload="sp = getSpotifyApi(1); spotichat = sp.require('js/spotichat'); spotichat.init(spotichat);">
    <div id="header">
        <h1>SpotiChat<span class="subtitle">chat where you listen</span></h1><span id="channel">channel : <span id="current-channel">None</span></span>
        <a id="logout-button" href="#" style="display: none;">log out</a>
    </div>
    <div id="content">
    <div id="chat-channel"></div>
    </div>
</body>
</html>